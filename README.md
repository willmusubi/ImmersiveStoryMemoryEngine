## 从剧本数据到沉浸魔法：Immersive Story Memory Engine（指导文件）

### Phase 1：Product Definition Brief（产品定义简报）

#### 1) North Star（北极星）

把一部长篇小说/剧本（如《三国演义》《天龙八部》）变成“可反复游玩”的沉浸式互动游戏，并且做到：

- **世界观不崩**：角色、物品、地理、时间线持续一致
- **玩家有历史**：玩家做过的事会长期影响世界（因果连续）
- **多轮不混淆**：不会几轮后忘记或自相矛盾

---

#### 2) The Core Problem（核心问题）✅ 你已经写得很好，我帮你提炼成“可测量”的定义

现在的 LLM 互动剧情很难沉浸，主要不是“不会写剧情”，而是 **无法可靠维护世界状态（World State）**，导致长期交互出现“状态漂移/记忆混淆”。

典型一致性错误（你给的例子非常标准）：

1. **物品所有权错误（Ownership）**

   - 貂蝉给了“定情信物”，后面信物又出现在貂蝉手里

2. **人物生死/状态错误（Life/Status）**

   - 白门楼救了吕布，但后续仍被描述“吕布已死”

3. **时间线错误（Timeline）**

   - 下邳之战出现在剿灭袁术之后（顺序颠倒）

4. **地理位置错误（Location/Travel）**

   - 人物瞬移、城市归属错、场景连续性断裂

> 本质：LLM 在“生成文本”很强，但在“维护可验证的事实与状态机”很弱。要沉浸，必须把“世界状态”从模型脑子里搬出来，变成一个可读写、可检索、可校验的外部系统。

---

#### 3) The MVP（最小可行产品）

**目标：先做一个“能跑起来且不崩”的单剧本 Demo**（local-first / 单机可部署）。

MVP 功能边界（强烈建议就这些）：

- **输入**：一部小说/剧本（Markdown / txt / 分章）+ 角色表（可选）
- **核心能力**：
  1. 建立“世界百科”（World Bible）：人物/地点/势力/物品/大事件的静态知识索引（RAG 可查）
  2. 建立“可写世界状态”（Canonical State）：玩家当前所在地点、队伍成员、物品归属、角色生死与关系、关键任务进度
  3. 每轮对话自动写入“事件日志”（Event Log），并更新状态
  4. 生成前必须进行“一致性校验”，发现矛盾就修正/重写/追问
- **界面**：一个简单 Web UI（聊天框 + 当前状态面板 + 关键事件时间线）

MVP 明确不做（避免爆炸）：

- 不做多剧本并行世界
- 不做多人在线一致性
- 不做复杂数值战斗系统（先文本叙事 + 状态一致）
